{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\dhrit\\\\Desktop\\\\Idea\\\\screens\\\\CustomerHome.web.tsx\";\nimport React, { useEffect, useState } from 'react';\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport { GoogleMap, Marker, InfoWindow, useJsApiLoader } from '@react-google-maps/api';\nimport { fetchNearbySalons } from '../services/places';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst containerStyle = {\n  width: '100%',\n  height: '100vh'\n};\nexport default function CustomerHome() {\n  const [center, setCenter] = useState(null);\n  const [places, setPlaces] = useState([]);\n  const [selected, setSelected] = useState(null);\n  const [error, setError] = useState(null);\n  const apiKey = process.env.EXPO_PUBLIC_GOOGLE_MAPS_API_KEY;\n  const {\n    isLoaded\n  } = useJsApiLoader({\n    id: 'google-map-script',\n    googleMapsApiKey: apiKey ?? ''\n  });\n  useEffect(() => {\n    if (!navigator.geolocation) {\n      setError('Geolocation is not supported by your browser');\n      return;\n    }\n    navigator.geolocation.getCurrentPosition(async pos => {\n      const c = {\n        lat: pos.coords.latitude,\n        lng: pos.coords.longitude\n      };\n      setCenter(c);\n      try {\n        const res = await fetchNearbySalons(c.lat, c.lng, 4000);\n        setPlaces(res);\n      } catch (e) {\n        setError(e?.message ?? 'Failed fetching nearby salons');\n      }\n    }, err => setError(err.message), {\n      enableHighAccuracy: true\n    });\n  }, []);\n  if (!isLoaded || !center) {\n    return _jsxDEV(View, {\n      style: styles.center,\n      children: [_jsxDEV(ActivityIndicator, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this), error ? _jsxDEV(Text, {\n        style: styles.error,\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 42,\n        columnNumber: 18\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }, this);\n  }\n  return _jsxDEV(\"div\", {\n    style: {\n      width: '100%',\n      height: '100vh'\n    },\n    children: _jsxDEV(GoogleMap, {\n      mapContainerStyle: containerStyle,\n      center: center,\n      zoom: 13,\n      options: {\n        streetViewControl: false\n      },\n      children: [_jsxDEV(Marker, {\n        position: center,\n        icon: {\n          url: 'https://maps.gstatic.com/mapfiles/ms2/micons/blue-dot.png'\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this), places.map(p => _jsxDEV(Marker, {\n        position: {\n          lat: p.geometry.location.lat,\n          lng: p.geometry.location.lng\n        },\n        onClick: () => setSelected(p)\n      }, p.place_id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 52,\n        columnNumber: 11\n      }, this)), selected ? _jsxDEV(InfoWindow, {\n        position: {\n          lat: selected.geometry.location.lat,\n          lng: selected.geometry.location.lng\n        },\n        onCloseClick: () => setSelected(null),\n        children: _jsxDEV(\"div\", {\n          style: {\n            maxWidth: 220\n          },\n          children: [_jsxDEV(\"div\", {\n            style: {\n              fontWeight: 700\n            },\n            children: selected.name\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 15\n          }, this), selected.vicinity ? _jsxDEV(\"div\", {\n            style: {\n              color: '#666'\n            },\n            children: selected.vicinity\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 58,\n            columnNumber: 36\n          }, this) : null, typeof selected.rating === 'number' ? _jsxDEV(\"div\", {\n            style: {\n              marginTop: 4\n            },\n            children: [selected.rating.toFixed(1), \" \\u2B50 (\", selected.user_ratings_total ?? 0, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 60,\n            columnNumber: 17\n          }, this) : null, selected.opening_hours?.open_now != null ? _jsxDEV(\"div\", {\n            style: {\n              color: selected.opening_hours.open_now ? '#34C759' : '#FF3B30',\n              marginTop: 4\n            },\n            children: selected.opening_hours.open_now ? 'Open now' : 'Closed'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 63,\n            columnNumber: 17\n          }, this) : null]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 11\n      }, this) : null]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 5\n  }, this);\n}\nconst styles = StyleSheet.create({\n  center: {\n    flex: 1,\n    height: '100vh',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  error: {\n    color: '#FF3B30',\n    marginTop: 8\n  }\n});","map":{"version":3,"names":["React","useEffect","useState","View","Text","ActivityIndicator","StyleSheet","GoogleMap","Marker","InfoWindow","useJsApiLoader","fetchNearbySalons","jsxDEV","_jsxDEV","containerStyle","width","height","CustomerHome","center","setCenter","places","setPlaces","selected","setSelected","error","setError","apiKey","process","env","EXPO_PUBLIC_GOOGLE_MAPS_API_KEY","isLoaded","id","googleMapsApiKey","navigator","geolocation","getCurrentPosition","pos","c","lat","coords","latitude","lng","longitude","res","e","message","err","enableHighAccuracy","style","styles","children","fileName","_jsxFileName","lineNumber","columnNumber","mapContainerStyle","zoom","options","streetViewControl","position","icon","url","map","p","geometry","location","onClick","place_id","onCloseClick","maxWidth","fontWeight","name","vicinity","color","rating","marginTop","toFixed","user_ratings_total","opening_hours","open_now","create","flex","justifyContent","alignItems"],"sources":["C:/Users/dhrit/Desktop/Idea/screens/CustomerHome.web.tsx"],"sourcesContent":["import React, { useEffect, useMemo, useState } from 'react';\r\nimport { View, Text, ActivityIndicator, StyleSheet } from 'react-native';\r\nimport { GoogleMap, Marker, InfoWindow, useJsApiLoader } from '@react-google-maps/api';\r\nimport { fetchNearbySalons, type NearbySalonPlace } from '../services/places';\r\n\r\nconst containerStyle = { width: '100%', height: '100vh' };\r\n\r\nexport default function CustomerHome() {\r\n  const [center, setCenter] = useState<{ lat: number; lng: number } | null>(null);\r\n  const [places, setPlaces] = useState<NearbySalonPlace[]>([]);\r\n  const [selected, setSelected] = useState<NearbySalonPlace | null>(null);\r\n  const [error, setError] = useState<string | null>(null);\r\n\r\n  const apiKey = (process as any).env.EXPO_PUBLIC_GOOGLE_MAPS_API_KEY as string | undefined;\r\n  const { isLoaded } = useJsApiLoader({ id: 'google-map-script', googleMapsApiKey: apiKey ?? '' });\r\n\r\n  useEffect(() => {\r\n    if (!navigator.geolocation) {\r\n      setError('Geolocation is not supported by your browser');\r\n      return;\r\n    }\r\n    navigator.geolocation.getCurrentPosition(\r\n      async (pos) => {\r\n        const c = { lat: pos.coords.latitude, lng: pos.coords.longitude };\r\n        setCenter(c);\r\n        try {\r\n          const res = await fetchNearbySalons(c.lat, c.lng, 4000);\r\n          setPlaces(res);\r\n        } catch (e: any) {\r\n          setError(e?.message ?? 'Failed fetching nearby salons');\r\n        }\r\n      },\r\n      (err) => setError(err.message),\r\n      { enableHighAccuracy: true }\r\n    );\r\n  }, []);\r\n\r\n  if (!isLoaded || !center) {\r\n    return (\r\n      <View style={styles.center}> \r\n        <ActivityIndicator />\r\n        {error ? <Text style={styles.error}>{error}</Text> : null}\r\n      </View>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div style={{ width: '100%', height: '100vh' }}>\r\n      <GoogleMap mapContainerStyle={containerStyle} center={center} zoom={13} options={{ streetViewControl: false }}>\r\n        <Marker position={center} icon={{ url: 'https://maps.gstatic.com/mapfiles/ms2/micons/blue-dot.png' }} />\r\n        {places.map((p) => (\r\n          <Marker key={p.place_id} position={{ lat: p.geometry.location.lat, lng: p.geometry.location.lng }} onClick={() => setSelected(p)} />\r\n        ))}\r\n        {selected ? (\r\n          <InfoWindow position={{ lat: selected.geometry.location.lat, lng: selected.geometry.location.lng }} onCloseClick={() => setSelected(null)}>\r\n            <div style={{ maxWidth: 220 }}>\r\n              <div style={{ fontWeight: 700 }}>{selected.name}</div>\r\n              {selected.vicinity ? <div style={{ color: '#666' }}>{selected.vicinity}</div> : null}\r\n              {typeof selected.rating === 'number' ? (\r\n                <div style={{ marginTop: 4 }}>{selected.rating.toFixed(1)} ‚≠ê ({selected.user_ratings_total ?? 0})</div>\r\n              ) : null}\r\n              {selected.opening_hours?.open_now != null ? (\r\n                <div style={{ color: selected.opening_hours.open_now ? '#34C759' : '#FF3B30', marginTop: 4 }}>\r\n                  {selected.opening_hours.open_now ? 'Open now' : 'Closed'}\r\n                </div>\r\n              ) : null}\r\n            </div>\r\n          </InfoWindow>\r\n        ) : null}\r\n      </GoogleMap>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst styles = StyleSheet.create({\r\n  center: { flex: 1, height: '100vh', justifyContent: 'center', alignItems: 'center' },\r\n  error: { color: '#FF3B30', marginTop: 8 },\r\n});\r\n"],"mappings":"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","ignoreList":[]},"metadata":{"hasCjsExports":false},"sourceType":"module","externalDependencies":[]}